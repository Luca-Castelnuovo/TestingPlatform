$("#submit").click(function(){var e=$("input[name=project_id]"),t=$("input[name=id]"),a=$("input[name=type]"),l=$("input[name=file_name]"),i=$("input[name=file_lang]:checked"),n=$("input[name=file_delete]"),o=$("textarea[name='file_content']"),c=$("input[name=CSRFtoken]"),d="",r="";$(".text").attr("disabled","true");var s="CSRFtoken="+c.val()+"&type=files&file_type="+a.val()+"&project_id="+e.val()+"&file_id="+t.val()+"&file_name="+l.val()+"&file_lang="+i.val()+"&file_delete="+n.val();console.log(s);var p=$(".login"),u=p.find("button > .state");if(p.addClass("loading"),u.html("Proccessing"),"add"==a.val()){if(""==l.val())return l.addClass("hightlight"),!1;l.removeClass("hightlight"),d="File created!",r="File not created!"}if("delete"==a.val()&&(d="File deleted!",r="File not deleted!"),"edit"==a.val()){if(""==o.val())return o.addClass("hightlight"),!1;o.removeClass("hightlight"),d="File saved!",r="File not saved!"}return"edit"==a.val()?$.ajax({url:"process.php?"+s,type:"POST",data:jQuery.param({file_content:o.val()}),cache:!1,contentType:"application/x-www-form-urlencoded; charset=UTF-8",success:function(t){p.addClass("ok"),u.html(d),setTimeout(function(){window.location.replace("/home?project="+e.val())},500)},error:function(){p.addClass("error"),u.html(r),setTimeout(function(){window.location.replace("/home?project="+e.val())},1e3)}}):$.ajax({url:"process.php",type:"GET",data:s,cache:!1,dataType:"JSON",success:function(t){t.status?(p.addClass("ok"),u.html(d),setTimeout(function(){window.location.replace("/home?project="+e.val())},500)):(p.addClass("error"),u.html(r),setTimeout(function(){window.location.replace("/home?project="+e.val())},1e3))}}),!1});
